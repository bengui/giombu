
// my-template.jade
extends ../layout

//Bloque de contenido.
block content
	.img_profile
		-if (contacts)
			h5 Tenes #{contacts.length} contactos!
	ul(class="nav nav-tabs nav-justified")
		li.active
			a(href="#misdatos", data-toggle="tab") Datos
		li
			a(href="#missuscripciones", data-toggle="tab") Suscripciones
		li
			a(href="#misofertas", data-toggle="tab") Ofertas
		li
			a(href="#miscomisiones", data-toggle="tab") Comisiones
		li
			a(href="#misbonos", data-toggle="tab") Bonos
		li
			a(href="#misimagenes", data-toggle="tab") Imagenes
		-if(RolesHelper.member(expose.user)|| RolesHelper.franchisorAdministrator(expose.user) || RolesHelper.generalAdministrator(expose.user)|| RolesHelper.admin(expose.user))
			li
				a(href="#administration", data-toggle="tab") AdministraciÃ³n
	.tab-content
		.tab-pane.fade.active.in#misdatos
			h3 Datos del usuario: #{user.username}
			span.glyphicon.glyphicon-pencil
			a(href="/users/profile/edit") Editar datos
			table.table-condensed
				tr 
					td.pull-right
						h5 Nombre:
					td #{user.name} #{user.lname}
				tr
					td.pull-right 
						h5 Email:
					td #{user.email}
				tr 
					td.pull-right 
						h5 DirecciÃ³n:
					td #{user.address} - #{user.city.name}, #{state.name} - #{country.name}
				tr 
					td.pull-right 
						h5 Telefono:
					td #{user.phone}
				tr 
					td.pull-right 
						h5 Movil:
					td #{user.mobile}
		-if(RolesHelper.member(expose.user)|| RolesHelper.franchisorAdministrator(expose.user) || RolesHelper.generalAdministrator(expose.user)|| RolesHelper.admin(expose.user))
			.tab-pane.fade.in#administration
				h3 Agregar Roles
				include ../partials/users/add_roles
		.tab-pane.fade.in#misofertas
				h3 Lista de Compras
				table.table
					tr
						th Oferta
						th Estado
						th Forma de Pago
						th Fecha
					-each deal in deals
						tr
							td
								a(href="#{deal._id}") #{deal.title}
							td #{deal.sales.status}
							td #{deal.sales.payment_method}
							td #{deal.sales.created}
		.tab-pane.fade.in#missuscripciones
			h3 Lista de Suscripciones
			table.table.missuscripciones
				-if (subscriptions)
					tr 
						th.tdmisdatos Nombre:
						th.tdmisdatos Fecha de suscripcion:
					-each subscription in subscriptions
						-if(subscription.franchise)
							tr 
								td #{subscription.franchise.name}
								td #{subscription.created}
		.tab-pane.fade.in#misbonos
			h3 Lista de Bonos
			table.table.misbonos
				tr
					th Usuario
					th Monto
					th Fecha
					th 
				-if (bonuses)
					-each bonus in bonuses
						include ../partials/bonuses/bonus
		.tab-pane.fade.in#miscomisiones
			h3 Lista de Comisiones
			table.table.miscomisiones
				tr
					th Monto
					th Fecha
					th  
				-if (commissions)
					-each commission in commissions
						include ../partials/commissions/commission
		.tab-pane.fade.in#misimagenes
			h3 Agregar Imagenes
			-var route_name = "users"
			-var get_id = user._id
			include ../includes/image_upload
			- images = user.images
			- param = "users"
			- id = user._id
			.images
				-if (images.length > 0)
					include ../partials/images/carousel
				-for (var i = images.length - 1; i >= 0; i--)
					-var image = images[i]
					include ../partials/images/media_list